<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>KASHMIR CULTURE HOLIDAYS</title>
<link rel="stylesheet" href="style.css" />
</head>
<body>

<!-- LOGIN / EDITOR -->
<div id="login-editor-section" class="section">
  <h2>Admin Login</h2>
  <input type="email" id="login-email" placeholder="Email" />
  <input type="password" id="login-password" placeholder="Password" />
  <button id="login-btn">Login</button>
  <p id="login-error" style="color:red;"></p>

  <div id="editor" style="display:none; margin-top:20px;">
    <h2>Edit Content</h2>
    <input type="text" id="hero-title-input" placeholder="Hero Title" />
    <input type="text" id="hero-intro-input" placeholder="Hero Intro" />
    <input type="text" id="hero-image-input" placeholder="Hero Image URL" />
    <button id="save-btn">Save Changes</button>
    <p id="save-msg" style="color:green;"></p>
  </div>
</div>

<!-- HERO -->
<div id="page1" class="section">
  <img id="hero-image" src="1.jpg" alt="Hero" class="hero-image">
  <h1 id="hero-title" class="title">Welcome to Kashmir Culture Holidays</h1>
  <p id="hero-intro" class="introduction">Explore the hidden beauty of Kashmir</p>
</div>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

<script>
  const firebaseConfig = {
    apiKey: "AIzaSyAVdVydpsY4NLqUINnI2einUIEt2WDuvV0",
    authDomain: "kashmir-466a5.firebaseapp.com",
    projectId: "kashmir-466a5",
    storageBucket: "kashmir-466a5.appspot.com",
    messagingSenderId: "197822369582",
    appId: "1:197822369582:web:506a533089ba8f00e334bf"
  };
  firebase.initializeApp(firebaseConfig);

  const auth = firebase.auth();
  const db = firebase.database();

  const loginBtn = document.getElementById('login-btn');
  const emailInput = document.getElementById('login-email');
  const passwordInput = document.getElementById('login-password');
  const loginError = document.getElementById('login-error');
  const editor = document.getElementById('editor');

  loginBtn.addEventListener('click', () => {
    auth.signInWithEmailAndPassword(emailInput.value, passwordInput.value)
      .then(() => {
        loginError.textContent = "Login successful!";
        editor.style.display = 'block';
        loadHeroContent();
      })
      .catch(err => loginError.textContent = err.message);
  });

  function loadHeroContent() {
    db.ref('hero').once('value').then(snapshot => {
      const data = snapshot.val();
      document.getElementById('hero-title-input').value = data.title || '';
      document.getElementById('hero-intro-input').value = data.intro || '';
      document.getElementById('hero-image-input').value = data.image || '';

      // Show content for users
      document.getElementById('hero-title').textContent = data.title || '';
      document.getElementById('hero-intro').textContent = data.intro || '';
      document.getElementById('hero-image').src = data.image || '';
    });
  }

  document.getElementById('save-btn').addEventListener('click', () => {
    const hero = {
      title: document.getElementById('hero-title-input').value,
      intro: document.getElementById('hero-intro-input').value,
      image: document.getElementById('hero-image-input').value
    };
    db.ref('hero').set(hero)
      .then(() => {
        document.getElementById('save-msg').textContent = "Hero content updated!";
        loadHeroContent();
      });
  });

  // Load hero content on page load
  loadHeroContent();
</script>

</body>
</html>
